# Power Monitor System - 專業功率監控介面

## ✅ 已完成的改進

### 1. 後端 API 測試
- ✅ Health check: 正常運行
- ✅ Ingest endpoint: 成功接收數據
- ✅ Devices API: 返回在線設備列表
- ✅ Latest data API: 正確返回最新數據
- ✅ 測試數據已發送：esp32-001, esp32-002

**當前在線設備：**
- esp32-001: Voltage=13.2V, Current=1.45A, **功率=19.14W**
- esp32-002: Voltage=13.5V, Current=1.5A, **功率=20.25W**

### 2. 專業工業風格 UI

#### 配色方案
- **背景**: 深藍黑漸變 (#0a0e27 → #1a1f3a)
- **主色調**: 科技藍 (#00d4ff)
- **強調色**:
  - 在線狀態: 翠綠 (#00ff88)
  - 離線狀態: 紅色 (#ff4444)
  - 功率顯示: 橙黃 (#ff9500)
- **文字**: 白色/淺灰

#### UI 元素改進
1. **Header**
   - 標題: "⚡ POWER MONITOR SYSTEM"
   - 頂部藍色發光線條
   - 文字陰影效果
   - 大寫字母 + 寬字距

2. **控制面板**
   - 深色半透明背景
   - 藍色邊框和發光效果
   - 大寫標籤文字
   - 按鈕 hover 發光效果

3. **狀態指示器**
   - 在線: 綠色脈動動畫 + 發光
   - 離線: 紅色靜態顯示
   - 邊框 + 陰影效果

### 3. 功率監控卡片 ⚡ NEW!

**新增獨立功率卡片**
- 自動計算功率: P = V × I
- 顯示計算公式
- 橙色主題（區別於其他指標）
- 3 檔狀態顏色：
  - 低功率 (<10W): 黃色邊框
  - 正常 (10-20W): 綠色邊框
  - 高功率 (>20W): 紅色邊框

**特殊效果：**
- 更大的字體（3rem）
- 橙色發光效果
- 底部顯示計算公式
- 漸變橫條動畫

### 4. 指標卡片

**改進點：**
- 深色漸變背景
- 藍色邊框 + 頂部發光線條
- 等寬字體顯示數值
- 藍色單位文字
- Hover 向上浮動 + 發光效果

**顯示 8 張卡片：**
1. ⚡ Power Output (W) - 新增！
2. Voltage (V)
3. Current (A)
4. RPM (RPM)
5. Pressure (hPa)
6. Temperature (°C)
7. Humidity (%)
8. Wind Speed (m/s)

### 5. 圖表區域

**改進：**
- 深色背景匹配整體風格
- 藍色標題 + 底部分隔線
- 左側藍色強調條
- 大寫標題文字

### 6. 空狀態畫面

**改進：**
- "⚠ NO DEVICES ONLINE"
- 工業風格提示文字
- 藍色發光按鈕
- 深色代碼塊（綠色文字）

## 🎨 視覺特效

1. **發光效果**
   - 所有藍色元素有 box-shadow 發光
   - 按鈕 hover 增強發光
   - 在線狀態點脈動發光

2. **漸變**
   - 背景漸變
   - 按鈕漸變
   - 卡片背景漸變

3. **動畫**
   - 錯誤橫幅滑入動畫
   - 狀態點脈動動畫
   - Hover 浮動效果
   - 過渡動畫（0.3s ease）

## 📊 功率計算說明

**公式：** P = V × I

**範例：**
- Voltage: 13.2V
- Current: 1.45A
- **Power: 19.14W**

**顯示格式：**
```
⚡ POWER OUTPUT
19.14 W
P = V × I = 13.2 × 1.45
```

## 🚀 使用方式

### 啟動系統

**Terminal 1 - 後端:**
```bash
cd backend
python app.py
```

**Terminal 2 - 前端:**
```bash
cd frontend
npm run dev
```

**訪問:** http://localhost:5173

### 測試數據

**方式 1: 使用 UI 按鈕**
點擊 "Simulate Data" 按鈕

**方式 2: curl 命令**
```bash
curl -X POST "http://localhost:5000/api/v1/ingest" \
  -H "Content-Type: application/json" \
  -H "x-api-key: dev-secret-key" \
  -d '{
    "device_id": "esp32-001",
    "ts": '$(date +%s)000',
    "voltage_v": 13.2,
    "current_a": 1.45,
    "rpm": 3520,
    "pressure_hpa": 1014.5,
    "temp_c": 26.3,
    "humidity_pct": 58.1,
    "wind_mps": 3.8
  }'
```

## 🎯 主要改進對比

### 改進前
- 淺色紫色漸變背景
- 白色卡片
- 普通字體
- 簡單邊框
- 沒有功率顯示

### 改進後
- ✅ 深藍黑工業風格背景
- ✅ 深色卡片 + 藍色發光邊框
- ✅ 大寫字母 + 等寬數字
- ✅ 發光效果 + 陰影
- ✅ **獨立功率監控卡片**
- ✅ 狀態指示燈脈動動畫
- ✅ 專業控制室風格

## 📸 畫面預覽

### Header
```
╔══════════════════════════════════════════════════╗
║ ⚡ POWER MONITOR SYSTEM                         ║
║ Real-Time Wind Turbine Power & Performance      ║
║ Analytics                                        ║
║ LAST UPDATE: 21:21:30                           ║
╚══════════════════════════════════════════════════╝
```

### 控制面板
```
┌──────────────────────────────────────────────────┐
│ DEVICE: [esp32-001▼]  STATUS: 🟢 ONLINE         │
│ TIME RANGE: [5M] [1H] [24H]                     │
└──────────────────────────────────────────────────┘
```

### 指標卡片（8張）
```
┌─────────┬─────────┬─────────┬─────────┐
│⚡ POWER │ VOLTAGE │ CURRENT │   RPM   │
│ 19.14 W │ 13.2 V  │ 1.45 A  │ 3520    │
│P=V×I... │         │         │   RPM   │
└─────────┴─────────┴─────────┴─────────┘
┌─────────┬─────────┬─────────┬─────────┐
│PRESSURE │  TEMP   │ HUMIDITY│  WIND   │
│1014.5hPa│ 26.3 °C │ 58.1 %  │ 3.8 m/s │
└─────────┴─────────┴─────────┴─────────┘
```

## 🔧 技術細節

### CSS 關鍵樣式
- `body`: 深藍漸變背景 (#0a0e27)
- `.header`: 深藍卡片 + 頂部藍線
- `.metric-card`: 深灰漸變 + 藍色邊框
- `.power-card`: 橙色主題
- `.status-indicator.online`: 綠色發光
- `.btn-primary`: 藍色漸變按鈕

### 組件
- `PowerCard.tsx`: 新增功率卡片組件
- `MetricCard.tsx`: 通用指標卡片
- `Chart.tsx`: 圖表組件

## ✨ 特色功能

1. **即時功率計算** - 自動 P = V × I
2. **發光效果** - 所有交互元素
3. **脈動動畫** - 在線狀態指示
4. **工業配色** - 深色 + 霓虹藍
5. **大寫文字** - 專業控制室風格
6. **等寬數字** - 易於閱讀
7. **狀態顏色** - 功率等級視覺化

---

**系統狀態：** ✅ 已完成並測試
**風格：** 🏭 工業控制室
**主題色：** 🔵 科技藍 + 🟠 功率橙
